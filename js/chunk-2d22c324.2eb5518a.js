(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d22c324"],{f1cf:function(e,s,t){"use strict";t.r(s);var i=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("a-modal",{attrs:{title:e.title,width:e.width,visible:e.visible,confirmLoading:e.confirmLoading,destroyOnClose:!0,cancelText:"关闭"},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("a-spin",{attrs:{spinning:e.confirmLoading}},[t("a-form-model",{ref:"form",attrs:{model:e.model,rules:e.validatorRules}},[t("a-form-model-item",{attrs:{label:"父级节点",labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"pid"}},[t("j-tree-select",{ref:"treeSelect",attrs:{placeholder:"请选择父级节点",dict:"sys_category,name,id",pidField:"pid",pidValue:"0",disabled:e.disabled},model:{value:e.model.pid,callback:function(s){e.$set(e.model,"pid",s)},expression:"model.pid"}})],1),t("a-form-model-item",{attrs:{label:"分类名称",labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"name"}},[t("a-input",{attrs:{placeholder:"请输入分类名称"},model:{value:e.model.name,callback:function(s){e.$set(e.model,"name",s)},expression:"model.name"}})],1)],1)],1)],1)},a=[],d=t("0fea"),l=t("b098"),n={name:"SysCategoryModal",components:{JTreeSelect:l["default"]},data:function(){return{title:"操作",width:800,visible:!1,model:{},labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}},confirmLoading:!1,validatorRules:{pid:{},name:[{required:!0,message:"请输入类型名称!"}]},url:{add:"/sys/category/add",edit:"/sys/category/edit",checkCode:"/sys/category/checkCode"},expandedRowKeys:[],pidField:"pid",subExpandedKeys:[]}},created:function(){},computed:{disabled:function(){return!!this.model.id}},methods:{add:function(){this.edit({})},edit:function(e){this.model=Object.assign({},e),this.visible=!0},close:function(){this.$emit("close"),this.visible=!1,this.$refs.form.resetFields()},handleOk:function(){var e=this,s=this;this.$refs.form.validate((function(t){if(!t)return!1;s.confirmLoading=!0;var i="",a="";e.model.id?(i+=e.url.edit,a="put"):(i+=e.url.add,a="post"),Object(d["h"])(i,e.model,a).then((function(t){t.success?(s.$message.success(t.message),s.submitSuccess(e.model)):s.$message.warning(t.message)})).finally((function(){s.confirmLoading=!1,s.close()}))}))},handleCancel:function(){this.close()},submitSuccess:function(e){if(e.id)this.$emit("ok",e);else{var s=this.$refs.treeSelect.getCurrTreeData();this.expandedRowKeys=[],this.getExpandKeysByPid(e[this.pidField],s,s),e.pid&&0==this.expandedRowKeys.length&&(this.expandedRowKeys=this.subExpandedKeys),this.$emit("ok",e,this.expandedRowKeys.reverse())}},getExpandKeysByPid:function(e,s,t){if(e&&s&&s.length>0)for(var i=0;i<s.length;i++)s[i].key==e?(this.expandedRowKeys.push(s[i].key),this.getExpandKeysByPid(s[i]["parentId"],t,t)):this.getExpandKeysByPid(e,s[i].children,t)}}},o=n,r=t("2877"),c=Object(r["a"])(o,i,a,!1,null,null,null);s["default"]=c.exports}}]);